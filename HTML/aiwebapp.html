<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
          body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
        }
        #gameCanvas {
            background-color: #222; /* Dark canvas background */
            display: block;
            border: 2px solid #fff;
        }
        .back-to-home {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 10px;
            background: #eee;
            color: #333;
            text-decoration: none;
            border-radius: 5px;
        }
    </style>
        <link href="../css/styles.css" rel="stylesheet" />
        <!-- Ensure the path to your CSS file is correct. It may vary depending on your folder structure. -->
        <!-- Font Awesome icons (if needed)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <link href="../css/styles.css" rel="stylesheet" />
        <link href="../css/customstyles.css" rel="stylesheet" />
    </head>
</head>
<body>
    <a href="../index.html" class="back-to-home">Back to Home Page</a>
    <a href="experience.html" class="scratch-link-experience">Experience</a>
    <a href="scratch.html" class="scratch-link-game">Scratch</a>
    
    <h2>Snake Game</h2>


    <canvas id="gameCanvas" width="500" height="500"></canvas>
   
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scale = 20;
        const rows = canvas.height / scale;
        const columns = canvas.width / scale;

        let snake, fruit, fruitImage, gameSpeed = 150;

   

        function initGame() {
            snake = new Snake();
            fruit = new Fruit();
            fruit.pickLocation(); // Randomize fruit position
            setInterval(gameLoop, gameSpeed);
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Update and draw snake
            snake.update();
            snake.draw();

            // Check if snake eats fruit
            if (snake.eat(fruit)) {
                fruit.pickLocation();
            }

            // Check for collisions
            snake.checkCollision();
        }

        function Snake() {
            this.x = 0;
            this.y = 0;
            this.xSpeed = scale;
            this.ySpeed = 0;

            this.update = function () {
                this.x += this.xSpeed;
                this.y += this.ySpeed;

                // Wrap edges for debugging purposes
                if (this.x >= canvas.width) this.x = 0;
                if (this.y >= canvas.height) this.y = 0;
                if (this.x < 0) this.x = canvas.width - scale;
                if (this.y < 0) this.y = canvas.height - scale;
            };

            this.draw = function () {
                ctx.fillStyle = "blue";
                ctx.fillRect(this.x, this.y, scale, scale);
            };

            this.changeDirection = function (direction) {
                    if (direction === "Up" && this.ySpeed === 0) {
                        this.xSpeed = 0; this.ySpeed = -scale;
                    } else if (direction === "Down" && this.ySpeed === 0) {
                        this.xSpeed = 0; this.ySpeed = scale;
                    } else if (direction === "Left" && this.xSpeed === 0) {
                        this.xSpeed = -scale; this.ySpeed = 0;
                    } else if (direction === "Right" && this.xSpeed === 0) {
                        this.xSpeed = scale; this.ySpeed = 0;
                    }
                };
            }


            this.checkCollision = function () {
                for (let i = 1; i < this.tail.length; i++) {
                    if (this.tail[0].x === this.tail[i].x && this.tail[0].y === this.tail[i].y) {
                        gameOver("You hit yourself!");
                    }
                }
            };
        }


        function gameOver(message) {
            setTimeout(() => {
                alert(`${message} Game Over! Your score: ${snake.tail.length - 1}`);
                resetGame();
            }, 100);
        }

        function resetGame() {
            // Reset snake and fruit state
            snake = new Snake();  // Create a new snake
            fruit.pickLocation(); // Randomize the fruit's position
            gameSpeed = 150;      // Reset game speed
        }
        
        // Handle arrow key inputs
        window.addEventListener('keydown', (e) => {
            const direction = e.key.replace('Arrow', '');
            snake.changeDirection(direction);
        });
    </script>
</body>
</html>

